# Twillio


## Gem Overview
Allows you to send sms messages from your app

## Installation Instructions
Add gem

```gem 'twilio-ruby', '~> 5.6'```

run ```bundle```

## Usage

>You need a Twilio Account

> You also need a .env file to securely store your twilio credentials

**Set uo your .env file**

secure our API credentials using the dotenv gem. Add to gem file

```gem 'dotenv-rails', :groups => [:development, :test]```

create a new file to hold your secure credentials

```touch .env```


Now before we can use this file let's make sure that we add it to the gitignore file so that our credentials don't get checked into source control. At the end of the file add this code:

```
/.env
```

Now we can add our credentials to the ```.env``` file like this:

```
TWILIO_ACCOUNT_SID=YOURACCOUNTSID
TWILIO_AUTH_TOKEN=YOURAUTHTOKEN
TWILIO_PHONE_NUMBER=+14322034437
```

>The twilio phone number needs to be generated by twillio in their manage phone numbers section

To confirm that Rails is able to access the values we can test this in the console by running:

```rails c``` to open console, then

```ENV['TWILIO_PHONE_NUMBER']```

And this should print out the phone number

>if you run into any bugs with this, it could be caused by spring, you can fix this by typing ```spring stop``` and it will stop spring, then reenter the above env command into console

-----

## Testing Twillio

in sms_tool.rb we have

```ruby
module SmsTool
  account_sid = ENV['TWILIO_ACCOUNT_SID']
  auth_token = ENV['TWILIO_AUTH_TOKEN']

  @client = Twilio::REST::Client.new account_sid, auth_token

  def self.send_sms(number:, message:)
    @client.messages.create(
      from: ENV['TWILIO_PHONE_NUMBER'],
      to: "+1#{number}",
      body: "#{message}"
    )

    puts "Sending SMS..."
    puts "#{message} to #{number}"
  end
end
```

to test our code, open ```rails c```

and run ```SmsTool.send_sms(number: '6475670072', message: "Look at me I am in a text")```

Your phone number should receive a text



-----

**Rubygems.org Link**

[twilio-ruby](https://rubygems.org/gems/twilio-ruby)

**Documentation Link**

[Dev Camp Guide](https://rails.devcamp.com/rest-microservices/sms-messages/securing-credentials-in-a-rails-app-with-dotenv)


https://rails.devcamp.com/trails/rest-microservices/campsites/sms-messages

https://rails.devcamp.com/rest-microservices/sms-messages/securing-credentials-in-a-rails-app-with-dotenv

https://rails.devcamp.com/rest-microservices/sms-messages/implementing-ability-send-sms-messages-rails
